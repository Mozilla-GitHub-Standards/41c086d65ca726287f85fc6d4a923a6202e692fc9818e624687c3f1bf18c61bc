language: python

include:
    # Use the built in venv for linux builds
    - os: linux
      sudo: required
      python: 3.6
    # Use generic language for osx
    - os: osx
      language: generic
# Perform the manual steps on osx to install python3 and activate venv
before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update          ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install python3; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then virtualenv venv -p python3; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then source venv/bin/activate; fi
install:
  - pip install flake8==3.3.0
before_script: "flake8 zeppelin tests"
script: "python setup.py test"
